Аудит №2024-09-17
- Вынесены общие пороги и вспомогательные функции определения режима в `mode-utils.js`, доступные как глобально, так и для модульного скрипта.
- Обновлен ранний bootstrap в `index.html` для использования общей утилиты при мгновенном применении `data-mode`.
- Обновлен основной бандл `script.js`, чтобы полагаться на `ModeUtils` и сохранить диагностику ширины в режиме отладки.
- Добавлено раннее назначение `data-input` через общую утилиту, чтобы исключить рассинхрон на touch-устройствах до загрузки основного бандла.

Аудит №2024-10-05
- Переведено отладочное логирование flyout на отключенное по умолчанию состояние с возможностью переопределения через `window.DEBUG_FLYOUT` и пользовательский логгер.
- Обернуты диагностические сообщения flyout в условную функцию, чтобы исключить шум в консоли и сохранить критические ошибки активными.

Аудит №2024-10-19
- Внедрена централизованная система управления жизненным циклом `init()` с отслеживанием всех слушателей, таймеров, observer'ов и RAF, включая экспорт отчёта через `window.__TOOSMART_APP__.getResources()`.
- Реализована корректная переинициализация и автоматическое отключение при `pagehide/beforeunload/visibilitychange`, обеспечивающая очистку в SPA-сценариях и на устройствах без современных API.
- Добавлены универсальные обёртки для регистрации/снятия ресурсов (events, media queries, timeouts, intervals, observers), а также финальный сброс состояний меню, flyout и прогресс-виджета.

Аудит №2024-10-28
- Добавлены ранние проверки наличия DOM-структуры rail-меню перед запуском сценариев `openMenu`, `closeMenu`, `toggleMenu`, edge-gestures и свайпов, что устраняет ошибки, отмеченные в аудите №2024-09-17.
- Усилена защита `initMenuLinks` от некорректных якорей и отсутствующих секций, чтобы сохранить стабильность жизненного цикла, зафиксированную в аудите №2024-10-19.
