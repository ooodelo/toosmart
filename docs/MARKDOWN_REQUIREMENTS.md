# Требования к Markdown файлам

## Обзор

Система автоматически сканирует папку `content/course/` и генерирует сайт из найденных `.md` файлов. **Никакой ручной настройки не требуется** — просто добавьте MD файл с правильной структурой и запустите сборку.

---

## Структура проекта

```
toosmart/
├── content/
│   └── course/              ← Положите сюда ваши MD файлы
│       ├── 01-intro.md      ← Первый раздел
│       ├── 02-basics.md     ← Второй раздел
│       ├── 03-advanced.md   ← Третий раздел
│       └── ...
├── src/                     ← UI шаблоны (не трогать)
├── scripts/
│   └── build.js             ← Запускает автоматическую генерацию
└── dist/                    ← Результат сборки (генерируется автоматически)
    ├── free/                ← Бесплатная версия с paywall
    └── premium/             ← Платная версия с полным контентом
```

---

## Правила именования файлов

### Формат имени: `NN[-_.]описание.md`

Где:
- **`NN`** — цифры в начале файла определяют **порядок в меню** (обязательно!)
- **`описание`** — человекочитаемое название (опционально, используется для генерации ID страницы)
- Разделитель: `-`, `_` или `.` (без разницы)

### Примеры правильных имён:

| Имя файла | Порядок | ID страницы | Результат |
|-----------|---------|-------------|-----------|
| `01.md` | 1 | `01` | `01.html` |
| `02-basics.md` | 2 | `basics` | `basics.html` |
| `03_chemistry.md` | 3 | `chemistry` | `chemistry.html` |
| `10.advanced-cleaning.md` | 10 | `advanced-cleaning` | `advanced-cleaning.html` |
| `25_eco-friendly.md` | 25 | `eco-friendly` | `eco-friendly.html` |

### Примеры неправильных имён:

❌ `intro.md` — нет номера в начале
❌ `section-01.md` — номер не в начале
❌ `1.md` — однозначное число (лучше `01.md`)

---

## Структура MD файла

### Обязательные элементы:

1. **Один заголовок H1** (`#`) — название раздела, отображается в меню
2. **Заголовки H2** (`##`) — подразделы, создают подменю и навигацию по странице
3. **Заголовки H3+** (`###`) — только для верстки внутри текста, не попадают в меню

### Шаблон MD файла:

```markdown
# Название раздела курса

Вступительный абзац. Этот текст будет показан в **бесплатной версии** как превью перед paywall.

Можно использовать любой Markdown: **жирный**, *курсив*, [ссылки](https://example.com).

## Первый подраздел

Это будет создано как отдельная секция с якорем `#первый-подраздел` и появится в подменю.

### Детали (H3 — только для верстки)

Этот заголовок H3 не попадёт в меню, но будет отображаться внутри контента.

#### Еще более детальный уровень (H4)

H4, H5, H6 — используются только для структурирования текста внутри раздела.

## Второй подраздел

Еще одна секция с автоматически сгенерированным ID `#второй-подраздел`.

**Списки:**
- Пункт 1
- Пункт 2
- Пункт 3

**Нумерованные списки:**
1. Шаг первый
2. Шаг второй
3. Шаг третий

**Цитаты:**
> Важная информация в блоке цитаты

**Код:**
```javascript
function example() {
  console.log('Пример кода');
}
```

**Таблицы:**
| Столбец 1 | Столбец 2 | Столбец 3 |
|-----------|-----------|-----------|
| Данные 1  | Данные 2  | Данные 3  |

## Третий подраздел

Изображения автоматически ищутся в `content/images/`:

![Описание изображения](image.jpg)
![Описание](./folder/image.png "Подпись к изображению")

```

---

## Как работает автоматическая генерация

### 1. Сканирование файлов

```bash
content/course/
├── 01-intro.md          ← Порядок: 1, ID: intro, Title: из H1
├── 02-basics.md         ← Порядок: 2, ID: basics, Title: из H1
└── 03-chemistry.md      ← Порядок: 3, ID: chemistry, Title: из H1
```

### 2. Извлечение данных

Для каждого файла система автоматически:
- ✅ Извлекает номер из имени файла → **порядок в меню**
- ✅ Извлекает ID из имени файла → **URL страницы**
- ✅ Извлекает H1 заголовок → **название раздела в меню**
- ✅ Извлекает H2 заголовки → **подразделы в подменю**

### 3. Генерация меню

Меню генерируется автоматически:

```
Структура курса
├─ 1. Введение в курс (H1)
│  ├─ Что вы узнаете (H2)
│  ├─ Как устроен курс (H2)
│  └─ Приступим (H2)
├─ 2. Основы работы (H1)
│  ├─ Первый принцип (H2)
│  ├─ Второй принцип (H2)
│  └─ Третий принцип (H2)
└─ 3. Продвинутые техники (H1)
   └─ (H2 заголовки автоматически)
```

### 4. Генерация навигации "Далее"

Кнопка "Далее" автоматически создаётся между разделами в порядке номеров файлов:
- `01-intro.md` → Далее → `02-basics.md`
- `02-basics.md` → Далее → `03-chemistry.md`
- `03-chemistry.md` → последний раздел, кнопки "Далее" нет

---

## Free vs Premium версии

### Free версия (с paywall):
- Показывается **вступительный абзац** (до первого H2)
- Остальной контент **размыт** (blur effect)
- Кнопка "Получить полную версию" → модальное окно оплаты

### Premium версия (полный контент):
- Весь контент доступен
- Навигация между разделами (кнопка "Далее")
- Защита через PHP + сессии

---

## Запуск сборки

```bash
# Собрать обе версии (free + premium)
npm run build

# Только free версию
npm run build:free

# Только premium версию
npm run build:premium

# Предпросмотр результата
npm run preview:free    # → http://localhost:3001
npm run preview:premium # → http://localhost:3002
```

---

## Пример полного MD файла

**Файл:** `content/course/05-kitchen-chemistry.md`

```markdown
# Химия кухонной уборки

Кухня — это место, где химия проявляется во всей красе. Жир, накипь, органические загрязнения требуют разных подходов и понимания химических процессов.

## Удаление жира

Жир — один из самых стойких загрязнений. Почему обычная вода не справляется?

### Молекулярная структура жиров

Молекулы жира гидрофобны — они отталкивают воду.

### ПАВ в действии

Поверхностно-активные вещества имеют гидрофильную "голову" и гидрофобный "хвост".

## Борьба с накипью

Накипь — это карбонат кальция (CaCO₃), который образуется при нагревании жёсткой воды.

### Кислоты против минералов

Карбонат кальция легко растворяется в кислотах:

```
CaCO₃ + 2H⁺ → Ca²⁺ + H₂O + CO₂↑
```

**Практические советы:**
- Уксус 9% — доступно и эффективно
- Лимонная кислота — без запаха
- Специальные средства — для сложных случаев

## Уход за нержавеющей сталью

Нержавейка не ржавеет благодаря пассивирующей плёнке оксида хрома.

> Важно: хлориды (соль) — главный враг нержавейки!

### Как вернуть блеск

1. Жидкое средство для посуды + мягкая губка
2. Вытереть насухо (против разводов)
3. Для глубокой очистки: паста из соды

**Изображение:**
![Структура нержавеющей стали](stainless-steel-structure.jpg "Микроскопическая структура")
```

---

## Поддерживаемые Markdown элементы

### Текстовое форматирование:
- **Жирный** → `**текст**`
- *Курсив* → `*текст*`
- ~~Зачеркнутый~~ → `~~текст~~`
- `Код` → `` `код` ``

### Ссылки:
```markdown
[Текст ссылки](https://example.com)
[Ссылка с подсказкой](https://example.com "Всплывающая подсказка")
```

### Изображения:
```markdown
![Alt текст](image.jpg)
![Alt текст](image.jpg "Подпись к изображению")
```

### Списки:
```markdown
- Маркированный список
- Пункт 2

1. Нумерованный список
2. Пункт 2
```

### Цитаты:
```markdown
> Цитата или важное замечание
```

### Код:
````markdown
```javascript
function example() {
  return true;
}
```
````

### Таблицы:
```markdown
| Заголовок 1 | Заголовок 2 |
|-------------|-------------|
| Ячейка 1    | Ячейка 2    |
```

### Горизонтальная линия:
```markdown
---
```

---

## FAQ

### Можно ли использовать русские буквы в именах файлов?

✅ Можно, но **не рекомендуется**. Используйте латиницу для ID:
- `05-химия.md` → ID будет `химия` (может вызвать проблемы)
- `05-chemistry.md` → ID будет `chemistry` (безопасно)

### Что если забыть H1 заголовок?

Система автоматически создаст название `Раздел N`, где N — номер из имени файла.

### Можно ли пропустить номера?

Да! Можно использовать `01.md`, `05.md`, `10.md` — система отсортирует по номерам.

### Можно ли использовать вложенные папки?

Нет, все MD файлы должны лежать напрямую в `content/course/`. Вложенные папки игнорируются.

### Можно ли изменить порядок разделов?

Да! Просто переименуйте файлы, изменив номера:
```bash
mv 02-basics.md 05-basics.md
mv 03-chemistry.md 02-chemistry.md
npm run build
```

### Как добавить новый раздел в середину?

1. Создайте файл с нужным номером: `03-new-section.md`
2. Переименуйте последующие разделы (увеличьте номера)
3. Запустите сборку: `npm run build`

Или используйте дробные номера: `02.md`, `02.5-extra.md`, `03.md`

---

## Чеклист перед добавлением нового раздела

- [ ] Имя файла начинается с цифры: `NN-name.md`
- [ ] Есть один H1 заголовок (`#`) с названием раздела
- [ ] Есть хотя бы один H2 заголовок (`##`) для подменю
- [ ] Вступительный абзац написан (для free версии)
- [ ] Изображения (если есть) лежат в `content/images/`
- [ ] Запущена сборка: `npm run build`
- [ ] Проверен результат: `npm run preview:free` и `npm run preview:premium`

---

## Примеры готовых файлов

Посмотрите существующие файлы в `content/course/`:
- `01-intro.md` — пример с простой структурой
- `02-basics.md` — пример с несколькими H2 подразделами
- `03-advanced.md` — пример с H3 заголовками для верстки

---

**Вопросы?** Проверьте вывод консоли после `npm run build` — система покажет, какие файлы найдены и как они обработаны.
