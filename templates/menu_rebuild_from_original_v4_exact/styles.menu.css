
/* ===== tokens (EXACT per original) ===== */
:root{
  --dot-size: 11px;              /* размер точки */
  --dot-gap: 11px;               /* интервал между точками */
  --rail-gap-left: 10px;         /* отступ рельсы от колонки */
  --z-rail: 11;                  /* как в оригинале */
  --z-overlay: 9998;
  --z-flyout: 9999;
  --flyout-radius: 28px;
}

/* ===== base ===== */
html, body{height:100%;}
body{
  margin:0;
  color:#111;
  background:#fff;
  font: 16px/1.6 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
.panel{display:flex; justify-content:center; padding:40px 24px;}
.text-box{width:min(540px, 90vw);}
.test-text .chapter{margin:48px 0;}
.chapter__title{font-size:20px; font-weight:700; line-height:1.3; margin:32px 0 12px;}
p{margin:0 0 12px;}

/* ===== dot rail (original) ===== */
.dot-status{
  position: fixed;
  top: 50%;
  transform: translateY(-50%);
  left: 0; /* вычисляет JS: левее текстового блока на 10px + ширина точки */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--dot-gap);
  padding: 0;
  z-index: var(--z-rail);
}
.dot-status .dot{
  width: var(--dot-size);
  height: var(--dot-size);
  border: 1px solid #d9d9d9;
  border-radius: 50%;
  display: block;
  padding: 0;
  margin: 0;
  line-height: 0;
  flex: 0 0 auto;
  box-sizing: border-box;
  background: transparent;
  background-clip: padding-box;
  -webkit-appearance: none;
  appearance: none;
  outline: none;
  cursor: pointer;
  transition: border-color .12s ease, box-shadow .16s ease;
}
/* SUBTLE hover (desktop-only) */
@media (hover:hover){
  .dot-status .dot:hover{ border-color:#bfbfbf; }
}
/* Active = exact original: filled dark ring */
.dot-status .dot.is-active,
.dot-status .dot[aria-current="true"]{
  background-color: #4A4A4A;
  border-color: #4A4A4A;
  /* paragraph progress outer ring (extra): */
  box-shadow: 0 0 0 var(--p-ring, 0px) #4A4A4A;
}
.dot:focus-visible{ outline: 1px dotted #999; outline-offset: 2px; }

/* ===== backdrop (click only) — visual per original in case of use ===== */
.flyout-backdrop{
  position: fixed;
  left: 0; top: 0;
  width: 0; height: 0;
  pointer-events: none;
  border-radius: var(--flyout-radius);
  background: rgba(255,255,255,0.6);
  -webkit-backdrop-filter: blur(10px) saturate(1.1);
  backdrop-filter: saturate(1.1) blur(40px);
  z-index: var(--z-overlay);
  will-change: left, top, width, height, backdrop-filter;
  opacity: 0;
}
.flyout-backdrop.is-open{ opacity: 1; pointer-events: auto; }

/* ===== flyout (exact visual) ===== */
.dot-flyout{
  position: fixed;
  /* позиция задаётся JS (рядом с точкой, по вертикали центрируется) */
  display: grid;
  gap: 10px;
  padding: 16px 18px;
  min-width: 220px;
  max-width: min(42vw, 360px);
  max-height: min(70vh, 520px);
  overflow: auto;
  border-radius: var(--flyout-radius);
  z-index: var(--z-flyout);
  color: #000;
  background: rgba(255,255,255,0.6);
  backdrop-filter: saturate(1.1) blur(40px);
  -webkit-backdrop-filter: blur(10px) saturate(1.1);
  border: 1px solid #AAA;
  isolation: isolate;
  opacity: 0;
  transform: translateY(6px) translateZ(0);
  pointer-events: none;
  transition: opacity .16s ease, transform .16s ease;
}
.dot-flyout.is-open{ opacity:1; transform:translateY(0) translateZ(0); pointer-events:auto; }

/* Hover / active list items: border-only highlight #AAA 1px */
.dot-flyout .flyout-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:10px; }
.dot-flyout .flyout-item{
  display:block; width:100%;
  padding: 10px 12px;
  text-align:left;
  border: 1px solid transparent;
  background: transparent;
  cursor: pointer;
  border-radius: 12px;
  font: inherit;
  transition: border-color .12s ease, background-color .12s ease;
}
.dot-flyout .flyout-item:hover,
.dot-flyout .flyout-item.is-active,
.dot-flyout .flyout-item[aria-current="true"]{
  border-color: #AAA !important;
  border-width: 1px !important;
  border-style: solid !important;
}

@media (prefers-reduced-motion: reduce){
  .dot-status .dot,
  .dot-flyout{ transition: none; }
}
