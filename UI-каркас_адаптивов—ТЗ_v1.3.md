# UI‑каркас адаптивов — ТЗ v1.3

## 1) Назначение
Собрать стабильный каркас страницы курса с едиными режимами (desktop / tablet‑wide / handheld), предсказуемым размещением блоков и согласованным поведением меню/хедера/рекомендаций. ТЗ описывает архитектуру, состояния, раскладки и взаимодействия. Дизайн‑коды и темы не входят.

## 2) Сущности (термины интерфейса)
- **Меню** — левая рельса с оглавлением структуры курса (overlay, вне Grid).
- **Текстовый блок** — основной блок статей (колонка чтения).
- **Рекомендации** — правая колонка с ссылками на дополнительные статьи.
- **Хэдер** — полоска сверху; содержит логотип и «руку»; синхронно съезжает с меню на десктопе.
- **Скролл‑меню «точки»** — индикатор/навигация по разделам, привязанный к тексту.
- **Кнопка «Далее»** — навигация к следующему разделу, поведение как в текущей версии.

## 3) Режимы и правила переключения
- **Desktop** — `vw ≥ 1280` и `pointer:fine` (или `vw ≥ 1440` без проверки указателя).
- **Tablet‑Wide** — `1024 ≤ vw ≤ 1366` на тач‑устройствах (iPadOS учитывается); iPad mini не включается.
- **Handheld** — `vw < 1024` или любая тач‑портретная ориентация.
- **Фоллбэк**, если детектор не выставил режим: 1024–1366 → tablet‑wide; <1024 → handheld; ≥1440 → desktop.

## 4) Раскладка по режимам
### Desktop
- Сетка: `menu | content | stack` (меню — overlay вне Grid).
- Колонка чтения фиксирована **540 px**, по центру контейнера.
- «Рекомендации» справа; визуально эквивалентны десктопу везде.
- «Точки» включены; привязаны к левой кромке текстовой колонки, выровнены по вертикальному центру вьюпорта.

### Tablet‑Wide (горизонтальные планшеты iPad 11/13 и аналоги)
- Сетка: `content | stack` (две колонки), страница центрируется; **текст 540 px** строго.
- «Рекомендации» всегда справа; не переносятся вниз; допускается сжатие карточек, но без H‑scroll.
- «Точки» скрыты.
- Хэдер присутствует, уже по ширине, но ведёт себя как на десктопе (синхронный съезд с меню).

### Handheld (вертикальные планшеты и телефоны)
- Одна колонка; текст на полную доступную ширину.
- «Рекомендации» располагаются **после** текста и кнопки «Далее» (вертикальная стопка).
- «Точки» скрыты.
- Плашка‑док снизу (см. §6.3).

## 5) Поведение и взаимодействия
### 5.1. Меню (левая рельса, overlay)
- **Всегда вне Grid**, `position:fixed; left:0; top:0; bottom:0`.
- Два состояния по ширине: закрыто (`узкая полоска‑ярлык`), открыто (полная ширина).
- Переключение только классом контейнера: `menu‑open`.

**Desktop:**
- Виден **ярлык** меню в виде вертикальной надписи слева.
- При **hover** по ярлыку меню выезжает; одновременно **съезжают** рамка текстового блока, «рука» и хэдер.
- Скролл внутри меню работает **только**, когда курсор внутри меню.
- Если скролл не в меню — скроллится **текстовый блок** (независимо от позиции курсора вне меню).
- Клик по фону/`Esc` — закрывает открытое меню.

**Tablet‑Wide (горизонтальные):**
- Меню открывается по **тапу/клику** по ярлыку или **свайпу от левого края**.
- В закрытом состоянии видна та же **вертикальная надпись‑ярлык**, что и на десктопе.
- Hover‑слайд отключён.
- Клик по фону/`Esc` — закрывает.

**Handheld:**
- Ярлык меню переносится в **плашку вдоль нижнего края экрана** (всегда видна; не скроллится).
- Меню выезжает **снизу вверх** из плашки; пока меню открыто — скролл только внутри меню.
- Тап/свайп/клик по пустому месту в верхней границе меню — сворачивает меню вниз (закрывает).
- `Esc` — закрывает (если доступна аппаратная клавиатура).

### 5.2. Текстовый блок
- Desktop/Tablet‑Wide: колонка чтения фиксирована **540 px** и центрируется относительно контейнера.
- Handheld: ширина текста адаптируется к экрану; отступы по теме.
- Скролл страницы управляет текстовым блоком (кроме режима ручной блокировки при открытом меню на handheld).

### 5.3. «Рекомендации» (правая колонка)
- Desktop/Tablet‑Wide: располагаются **справа**, **всегда в кадре** (sticky), имеют **собственный скролл, когда контента больше высоты окна**.
- Логика движения: при скролле страницы «рекомендации» сначала движутся синхронно с текстом; достигнув верхней границы (sticky‑позиции), прекращают смещение и остаются на месте; текст продолжает скроллиться; при избытке карточек прокрутка внутри колонки независимая.
- Handheld: блок «рекомендации» идёт **после** текста и кнопки «Далее».

### 5.4. «Точки» (скролл‑меню разделов)
- Desktop: всегда привязаны к левой части текстовой колонки; фиксированы по вертикали **к центру экрана**.
- Tablet‑Wide/Handheld: скрыты.

### 5.5. Хэдер
- Виден во всех режимах.
- На десктопе при выезде меню хэдер **съезжает синхронно** с меню (вместе с логотипом и «рукой»).
- На tablet‑wide хэдер уже, но логика синхронного съезда сохраняется.
- На handheld — без сдвига контента; плашка меню управляет выездом снизу.

### 5.6. Кнопка «Далее»
- Поведение как сейчас; на handheld — располагается **сразу после** текста, перед блоком «Рекомендации».

## 6) Состояния, жесты и скролл
### 6.1. Состояния контейнера
- `data‑mode="desktop|tablet‑wide|handheld"` — текущий режим.
- `menu‑open` — меню раскрыто.
- `is‑slid` — временный ховер‑слайд (только desktop).
- `data‑lock="scroll"` — блокировка фонового скролла (используется на handheld при открытом меню).

### 6.2. Жесты/клики
- **Desktop:** hover по ярлыку — выезд меню; уход курсора в текст — заезд; клик по фону/`Esc` — закрыть.
- **Tablet‑Wide:** тап/клик по ярлыку слева; **edge‑свайп** от левого края на dx ≥ 28 px (|dy| < 80 px); клик по фону/`Esc` — закрыть.
- **Handheld:** тап по плашке‑ярлыку снизу или свайп **вверх** из плашки — открыть; свайп **вниз**/тап по пустому сверху/`Esc` — закрыть.

### 6.3. Скролл и блокировки
- На handheld при `menu‑open` скролл документа блокируется; допускается только внутри меню.
- На desktop/tablet‑wide блокировка не требуется; меню — overlay, не влияет на Grid/высоты.

## 7) Визуальные инварианты (без дизайн‑кода)
- Все overlay‑элементы вне Grid, не растягивают строки и не создают «серых полотен» при открытии.
- «Рекомендации» на desktop/tablet‑wide — всегда справа и в кадре (sticky).
- «Точки» — только на desktop.
- **Все блоки оформить в оттенках серого** для наглядности и с **рамкой 1px и скруглениями** (минимальная стилизация для различения зон).

## 8) Наполнение тестовым контентом (обязательно)
### 8.1. Тестовые описания блоков (коротко, 1 абзац каждый)
- **Меню (оглавление):** Этот блок демонстрирует, как пользователь просматривает разделы курса и открывает пункты навигации. Проверьте отдельный скролл внутри меню и реакции на hover/тап/свайп в зависимости от режима.
- **Текстовый блок:** Здесь расположен основной материал. Тестовое содержание имитирует структуру урока, чтобы проверить ширину колонки, переносы строк, якоря разделов и взаимодействие с «точками».
- **Рекомендации:** Правая колонка показывает связанные материалы. Наблюдаем поведение sticky и независимый скролл при избытке карточек; колонка остаётся видимой и не влияет на ширину текста.
- **Хэдер:** Верхняя полоска с логотипом и «рукой». На десктопе хэдер синхронно съезжает с меню; на планшетах — более узкий, но с тем же принципом движения; на телефонах — статичен относительно плашки.

### 8.2. Пять тестовых разделов (каждый ≈1000 символов, в 3 абзаца)
**Раздел 1**  
Этот текст имитирует небольшой фрагмент урока: одно ключевое утверждение, один пример и короткий итог. Он нужен для проверки ширины строки и читаемости.

Второй абзац специально короче: сравнить межабзацные интервалы, переносы и поведение «точек».

Третий абзац завершает блок и подготавливает переход к следующему разделу и кнопке «Далее».

**Раздел 2**  
Материал моделирует карточку теории: определение, краткая формула и бытовой пример применения. Содержимое нейтральное, чтобы не отвлекать от UX.

Второй абзац фокусируется на навигации: прокрутка, позиционирование и якоря на заголовках разделов.

Третий абзац демонстрирует возврат к оглавлению и продолжение скролла к «Рекомендациям».

**Раздел 3**  
Эта секция нужна для проверки стабильности каркаса: длина строк, поведение sticky‑блоков и синхронность скролла.

Во втором абзаце просматриваем, как ведут себя переносы в узком и широком режимах, и как исчезают «точки».

Третий абзац подтверждает, что кнопка «Далее» доступна и уместна по смыслу после текста.

**Раздел 4**  
Содержимое предназначено для визуальной верификации: рамки, скругления и серые фоны. Оно демонстрирует различимость блоков.

Второй абзац проверяет отсутствие горизонтальной прокрутки и корректное центрирование колонки чтения.

Третий абзац моделирует ситуацию с долгими заголовками и их влиянием на навигацию.

**Раздел 5**  
Этот блок проверяет совместную работу с «Рекомендациями»: достаточную высоту sticky и независимый внутренний скролл карточек.

Во втором абзаце оценивается качество перехода к блоку с рекомендациями после кнопки «Далее».

Третий абзац завершает последовательность и готовит к повторной навигации через меню.

## 9) Требования к заполнению
- Подключить заглушки текстов из §8.2 к пяти разделам (якоря заголовков формируют «точки» на desktop).
- Добавить короткие описания из §8.1 внутрь соответствующих блоков‑контейнеров.
- Все зоны визуально различить серыми оттенками и тонкой рамкой 1px с скруглениями.
- «Рекомендации» наполнить 6–10 карточками (фиктивные названия), чтобы проверить собственный скролл.
- В плашку снизу на handheld поместить ярлык‑надпись меню (для открытия).

## 10) Нейминг и состояния (без кода)
- Контейнер: `body[data-mode]`, состояния: `menu-open`, `is-slid`, `data-lock="scroll"`.
- Блоки: `.menu-rail`, `.panel > .text-box`, `.stack > .stack-list`, `.header`, `.dots-rail`, `.btn-next`.
- Overlay‑фон: `.backdrop.main` (кликабелен для закрытия меню).
