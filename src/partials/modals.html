<!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –î–õ–Ø LEGAL –†–ê–ó–î–ï–õ–û–í -->
<div class="modal legal-modal" id="legal-offer-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('offer')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('offer')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞</h2>
        <div class="legal-text">
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω —Ç–µ–∫—Å—Ç –ø—É–±–ª–∏—á–Ω–æ–π –æ—Ñ–µ—Ä—Ç—ã...</p>
        </div>
    </div>
</div>

<div class="modal legal-modal" id="legal-privacy-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('privacy')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('privacy')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h2>
        <div class="legal-text">
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏...</p>
        </div>
    </div>
</div>

<div class="modal legal-modal" id="legal-requisites-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('requisites')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('requisites')"
            aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–†–µ–∫–≤–∏–∑–∏—Ç—ã</h2>
        <div class="legal-text">
            <p><strong>–ò–ü –ò–≤–∞–Ω–æ–≤ –ò.–ò. ¬∑ –ò–ù–ù 1234567890</strong></p>
        </div>
    </div>
</div>

<div class="modal legal-modal" id="legal-cookies-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('cookies')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('cookies')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–ü–æ–ª–∏—Ç–∏–∫–∞ Cookies</h2>
        <div class="legal-text">
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è cookies...</p>
        </div>
    </div>
</div>

<div class="modal legal-modal" id="legal-refund-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('refund')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('refund')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–ü–æ—Ä—è–¥–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞</h2>
        <div class="legal-text">
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–∞...</p>
        </div>
    </div>
</div>

<div class="modal legal-modal" id="legal-contacts-modal" hidden>
    <div class="modal-overlay" onclick="closeLegalModal('contacts')"></div>
    <div class="modal-content legal-modal-content">
        <button class="modal-close" type="button" onclick="closeLegalModal('contacts')" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
        <h2 class="modal-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div class="legal-text">
            <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è...</p>
        </div>
    </div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–•–û–î–ê –í –õ–ö -->
<div class="modal" id="login-modal" role="dialog" aria-modal="true" aria-labelledby="login-modal-title" hidden>
    <div class="modal-overlay" onclick="closeLoginModal()"></div>
    <div class="modal-content">
        <button class="modal-close" type="button" onclick="closeLoginModal()" aria-label="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>

        <h2 id="login-modal-title" class="modal-title">–í–æ–π—Ç–∏ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>

        <p style="text-align: center; color: #666; margin-bottom: 24px; font-size: 15px;">
            –í–≤–µ–¥–∏—Ç–µ email, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ
        </p>

        <div id="login-error" style="display: none;" role="alert"></div>

        <form id="login-form">
            <input type="email" name="email" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" required autocomplete="email"
                aria-label="Email –¥–ª—è –≤—Ö–æ–¥–∞">

            <input type="password" name="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required autocomplete="current-password"
                aria-label="–ü–∞—Ä–æ–ª—å" style="margin-bottom: 16px;">

            <button type="submit" class="modal-submit">
                –í–æ–π—Ç–∏
            </button>
        </form>

        <p style="text-align: center; margin-top: 16px;">
            <a href="/premium/" style="color: #667eea; text-decoration: none; font-size: 14px;">
                –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
            </a>
        </p>

        <p class="modal-security">
            üîê –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞–¥–µ–∂–Ω–æ –∑–∞—â–∏—â–µ–Ω—ã
        </p>
    </div>
</div>

<!-- COOKIE CONSENT BANNER -->
<div class="cookie-banner" id="cookie-banner" hidden>
    <div class="cookie-content">
        <p class="cookie-text">
            üç™ –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º cookies –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏.
            –ü—Ä–æ–¥–æ–ª–∂–∞—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–π—Ç, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å
            <a href="#" onclick="openLegalModal('privacy'); return false;">–ü–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>.
        </p>
        <div class="cookie-buttons">
            <button class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">–ü—Ä–∏–Ω—è—Ç—å</button>
            <button class="cookie-btn cookie-btn-decline" onclick="declineCookies()">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
        </div>
    </div>
</div>

<script>
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω —Å —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
    function openLegalModal(type) {
        const modalId = 'legal-' + type + '-modal';
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.removeAttribute('hidden');
            document.body.style.overflow = 'hidden';
        }
    }

    function closeLegalModal(type) {
        const modalId = 'legal-' + type + '-modal';
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.setAttribute('hidden', '');
            document.body.style.overflow = '';
        }
    }

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≤—Ö–æ–¥–∞ –≤ –õ–ö
    function openLoginModal() {
        const modal = document.getElementById('login-modal');
        if (modal) {
            modal.removeAttribute('hidden');
            document.body.style.overflow = 'hidden';

            // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ email
            const emailInput = modal.querySelector('input[name="email"]');
            if (emailInput) {
                setTimeout(() => emailInput.focus(), 100);
            }
        }
    }

    function closeLoginModal() {
        const modal = document.getElementById('login-modal');
        if (modal) {
            modal.setAttribute('hidden', '');
            document.body.style.overflow = '';

            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
            const errorDiv = document.getElementById('login-error');
            if (errorDiv) {
                errorDiv.style.display = 'none';
                errorDiv.textContent = '';
            }
        }
    }

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    document.addEventListener('DOMContentLoaded', function () {
        const loginForm = document.getElementById('login-form');
        if (loginForm) {
            loginForm.addEventListener('submit', function (e) {
                e.preventDefault();

                const email = this.email.value.trim();
                const password = this.password.value;
                const errorDiv = document.getElementById('login-error');
                const submitBtn = this.querySelector('button[type="submit"]');

                if (!email || !password) {
                    if (errorDiv) {
                        errorDiv.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è';
                        errorDiv.style.display = 'block';
                        errorDiv.style.background = '#fff5f5';
                        errorDiv.style.color = '#c62828';
                        errorDiv.style.padding = '12px 16px';
                        errorDiv.style.borderRadius = '10px';
                        errorDiv.style.fontSize = '14px';
                        errorDiv.style.marginBottom = '16px';
                        errorDiv.style.borderLeft = '3px solid #e53935';
                    }
                    return;
                }

                // –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                submitBtn.disabled = true;
                submitBtn.textContent = '–í—Ö–æ–¥...';

                // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/premium/';

                const emailField = document.createElement('input');
                emailField.type = 'hidden';
                emailField.name = 'email';
                emailField.value = email;
                form.appendChild(emailField);

                const passwordField = document.createElement('input');
                passwordField.type = 'hidden';
                passwordField.name = 'password';
                passwordField.value = password;
                form.appendChild(passwordField);

                document.body.appendChild(form);
                form.submit();
            });
        }
    });

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è cookie consent banner
    function acceptCookies() {
        localStorage.setItem('cookieConsent', 'accepted');
        const banner = document.getElementById('cookie-banner');
        if (banner) {
            banner.setAttribute('hidden', '');
        }
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
        console.log('Cookies accepted - analytics can be loaded');
    }

    function declineCookies() {
        localStorage.setItem('cookieConsent', 'declined');
        const banner = document.getElementById('cookie-banner');
        if (banner) {
            banner.setAttribute('hidden', '');
        }
        console.log('Cookies declined - analytics will not be loaded');
    }

    // –ü–æ–∫–∞–∑–∞—Ç—å cookie banner –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', function () {
        const cookieConsent = localStorage.getItem('cookieConsent');
        if (!cookieConsent) {
            const banner = document.getElementById('cookie-banner');
            if (banner) {
                banner.removeAttribute('hidden');
            }
        }
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö legal –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ Escape
    document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
            closeLegalModal('offer');
            closeLegalModal('privacy');
            closeLegalModal('refund');
            closeLegalModal('requisites');
            closeLegalModal('cookies');
            closeLegalModal('contacts');
            closeLoginModal();
        }
    });
</script>